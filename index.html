<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>식탁보 AI</title>
    <base href="/" />

    <!-- PWA 메타 태그 -->
    <meta name="description" content="AI 챗봇과 Windows Sandbox 설정을 한 곳에서 관리하는 PWA 앱" />
    <meta name="keywords" content="식탁보, AI, 챗봇, Windows Sandbox, PWA, 오픈라우터" />
    <meta name="author" content="식탁보 팀" />
    <meta name="theme-color" content="#03173d" />
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff" />
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#03173d" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="식탁보 AI" />
    <meta name="application-name" content="식탁보 AI" />
    <meta name="msapplication-TileColor" content="#03173d" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="format-detection" content="telephone=no" />

    <!-- iOS 스플래시 스크린 (선택적) -->
    <link rel="apple-touch-startup-image" href="icon-512.png" />

    <!-- Open Graph 메타 태그 -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="식탁보 AI" />
    <meta property="og:description" content="AI 챗봇과 Windows Sandbox 설정을 한 곳에서 관리하는 PWA 앱" />
    <meta property="og:url" content="https://yourtablecloth.app/" />
    <meta property="og:image" content="https://yourtablecloth.app/icon-512.png" />
    <meta property="og:site_name" content="식탁보 AI" />

    <!-- Twitter Card 메타 태그 -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="식탁보 AI" />
    <meta name="twitter:description" content="AI 챗봇과 Windows Sandbox 설정을 한 곳에서 관리하는 PWA 앱" />
    <meta name="twitter:image" content="https://yourtablecloth.app/icon-512.png" />

    <!-- 테마 초기 로딩 스크립트 (FOUC 방지) -->
    <script>
        (function () {
            const savedTheme = localStorage.getItem('theme-preference') || 'Auto';
            const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            const prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;

            // 시스템 테마 상세 정보
            const systemThemeInfo = {
                mediaQuerySupported: !!window.matchMedia,
                prefersDark: prefersDark,
                prefersLight: prefersLight,
                noPreference: !prefersDark && !prefersLight,
                userAgent: navigator.userAgent,
                platform: getPlatform(),
                currentTime: new Date().toLocaleString()
            };

            let shouldApplyDark = false;
            let reason = '';

            if (savedTheme === 'Dark') {
                shouldApplyDark = true;
                reason = '사용자가 다크 모드를 선택함';
            } else if (savedTheme === 'Light') {
                shouldApplyDark = false;
                reason = '사용자가 라이트 모드를 선택함';
            } else if (savedTheme === 'Auto') {
                shouldApplyDark = prefersDark;
                reason = prefersDark ?
                    '자동 모드: 시스템에서 다크 모드를 선호함' :
                    '자동 모드: 시스템에서 라이트 모드를 선호함 (또는 선호도 없음)';
            }

            console.log('🎨 테마 초기 로딩 상세 정보:', {
                savedTheme,
                shouldApplyDark,
                reason,
                systemInfo: systemThemeInfo
            });

            // 플랫폼 감지 함수
            function getPlatform() {
                const ua = navigator.userAgent;
                if (ua.includes('Windows')) return 'Windows';
                if (ua.includes('Mac')) return 'macOS';
                if (ua.includes('iPhone') || ua.includes('iPad')) return 'iOS';
                if (ua.includes('Android')) return 'Android';
                if (ua.includes('Linux')) return 'Linux';
                return 'Unknown';
            }

            if (shouldApplyDark) {
                document.documentElement.classList.add('dark-theme');
                document.documentElement.classList.remove('light-theme');
                console.log('✅ 다크 테마 클래스 적용');
            } else {
                document.documentElement.classList.add('light-theme');
                document.documentElement.classList.remove('dark-theme');
                console.log('✅ 라이트 테마 클래스 적용');
            }

            // 적용된 클래스와 CSS 변수 확인
            setTimeout(() => {
                console.log('📋 HTML 클래스 목록:', document.documentElement.className);
                const computedStyle = getComputedStyle(document.documentElement);
                console.log('🎨 적용된 CSS 변수들:', {
                    '--primary-bg': computedStyle.getPropertyValue('--primary-bg').trim(),
                    '--primary-text': computedStyle.getPropertyValue('--primary-text').trim(),
                    '--accent-color': computedStyle.getPropertyValue('--accent-color').trim()
                });

                // 시스템 테마 변경 감지 설정
                if (window.matchMedia) {
                    const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
                    darkModeMediaQuery.addEventListener('change', (e) => {
                        console.log('🔄 시스템 테마 변경 감지:', e.matches ? '다크 모드' : '라이트 모드');
                        if (localStorage.getItem('theme-preference') === 'Auto') {
                            console.log('⚡ 자동 모드이므로 테마 자동 변경');
                        }
                    });
                }
            }, 100);
        })();
    </script>

    <link href="_framework/blazor.webassembly.0o6sltz4v8.js" rel="preload" as="script" fetchpriority="high" crossorigin="anonymous" integrity="sha256-QPblb0B3n+m0u11HG4nhpAiOn39aNT2Jm/OQ+6wpU4s=" />
<link href="_framework/dotnet.7idukd38rr.js" rel="preload" as="script" fetchpriority="high" crossorigin="anonymous" integrity="sha256-37cmZ6jFYxpHuNLizdHz58zSECF40vLI+PClN7gVtyU=" />
<link href="_framework/dotnet.native.98v1chuo8c.js" rel="preload" as="script" fetchpriority="high" crossorigin="anonymous" integrity="sha256-p1ska6aoeHyBLfhCjNMQKR6Jm+Is1DOrHR1eLsY/1LI=" />
<link href="_framework/dotnet.runtime.fn94ls2wwa.js" rel="preload" as="script" fetchpriority="high" crossorigin="anonymous" integrity="sha256-JbGaPjn+PC/jQhB3fqsJ8NF8MR3lOr+q49kJVeHNWhU=" />
<link href="js/app.d2u4fo1fet.js" rel="preload" as="script" fetchpriority="high" crossorigin="anonymous" integrity="sha256-NRAa6W0vebprliRFU5S+2l9FzPkacS01DifiudYGKFQ=" />
<link href="js/theme.tw7zf59lva.js" rel="preload" as="script" fetchpriority="high" crossorigin="anonymous" integrity="sha256-M3onquopaB/1woJqHcVA/rQNGj0qc4ZUnTJsHP7IZRk=" />
<link href="lib/bootstrap/dist/js/bootstrap.5d0yzkekv5.js" rel="preload" as="script" fetchpriority="high" crossorigin="anonymous" integrity="sha256-pxYvfpIYKWykWk7yekBNOAboswBij3inSe8amhnFWsc=" />
<link href="lib/bootstrap/dist/js/bootstrap.bundle.85dgjsq755.js" rel="preload" as="script" fetchpriority="high" crossorigin="anonymous" integrity="sha256-dBY/6wSUpBmYIBqYBzucAkgxE4Z9db2VFPtGOIkyKfo=" />
<link href="lib/bootstrap/dist/js/bootstrap.bundle.min.493y06b0oq.js" rel="preload" as="script" fetchpriority="high" crossorigin="anonymous" integrity="sha256-CDOy6cOibCWEdsRiZuaHf8dSGGJRYuBGC+mjoJimHGw=" />
<link href="lib/bootstrap/dist/js/bootstrap.esm.min.jj8uyg4cgr.js" rel="preload" as="script" fetchpriority="high" crossorigin="anonymous" integrity="sha256-QZdFT1ZNdly4rmgUBtXmXFS9BU1FTa+sPe6h794sFRQ=" />
<link href="lib/bootstrap/dist/js/bootstrap.esm.q49sru06i7.js" rel="preload" as="script" fetchpriority="high" crossorigin="anonymous" integrity="sha256-OtBaHKCppSkTX5/zt39QCHgcxIjf916OdtBLOzZ9Hbk=" />
<link href="lib/bootstrap/dist/js/bootstrap.min.63fj8s7r0e.js" rel="preload" as="script" fetchpriority="high" crossorigin="anonymous" integrity="sha256-3gQJhtmj7YnV1fmtbVcnAV6eI4ws0Tr48bVZCThtCGQ=" />
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link rel="icon" type="image/png" href="favicon.png" />

    <!-- PWA 매니페스트 -->
    <link href="manifest.webmanifest" rel="manifest" />

    <!-- Apple 터치 아이콘 -->
    <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png" />

    <!-- Favicon 다양한 크기 -->
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png" />

    <!-- TODO: MSBuild로 이전 검토 -->
    <link href="https://yourtablecloth.app/TableClothCatalog/Catalog.xml" rel="prefetch" />
    <link href="TableClothLite.styles.css" rel="stylesheet" />

    <script type="importmap">{
  "imports": {
    "./_framework/blazor.webassembly.js": "./_framework/blazor.webassembly.0o6sltz4v8.js",
    "./_framework/dotnet.js": "./_framework/dotnet.7idukd38rr.js",
    "./_framework/dotnet.native.js": "./_framework/dotnet.native.98v1chuo8c.js",
    "./_framework/dotnet.runtime.js": "./_framework/dotnet.runtime.fn94ls2wwa.js",
    "./js/app.js": "./js/app.d2u4fo1fet.js",
    "./js/theme.js": "./js/theme.tw7zf59lva.js",
    "./lib/bootstrap/dist/js/bootstrap.js": "./lib/bootstrap/dist/js/bootstrap.5d0yzkekv5.js",
    "./lib/bootstrap/dist/js/bootstrap.bundle.js": "./lib/bootstrap/dist/js/bootstrap.bundle.85dgjsq755.js",
    "./lib/bootstrap/dist/js/bootstrap.bundle.min.js": "./lib/bootstrap/dist/js/bootstrap.bundle.min.493y06b0oq.js",
    "./lib/bootstrap/dist/js/bootstrap.esm.min.js": "./lib/bootstrap/dist/js/bootstrap.esm.min.jj8uyg4cgr.js",
    "./lib/bootstrap/dist/js/bootstrap.esm.js": "./lib/bootstrap/dist/js/bootstrap.esm.q49sru06i7.js",
    "./lib/bootstrap/dist/js/bootstrap.min.js": "./lib/bootstrap/dist/js/bootstrap.min.63fj8s7r0e.js"
  },
  "scopes": {},
  "integrity": {
    "./_framework/blazor.webassembly.0o6sltz4v8.js": "sha256-QPblb0B3n+m0u11HG4nhpAiOn39aNT2Jm/OQ+6wpU4s=",
    "./_framework/blazor.webassembly.js": "sha256-QPblb0B3n+m0u11HG4nhpAiOn39aNT2Jm/OQ+6wpU4s=",
    "./_framework/dotnet.7idukd38rr.js": "sha256-37cmZ6jFYxpHuNLizdHz58zSECF40vLI+PClN7gVtyU=",
    "./_framework/dotnet.js": "sha256-37cmZ6jFYxpHuNLizdHz58zSECF40vLI+PClN7gVtyU=",
    "./_framework/dotnet.native.98v1chuo8c.js": "sha256-p1ska6aoeHyBLfhCjNMQKR6Jm+Is1DOrHR1eLsY/1LI=",
    "./_framework/dotnet.native.js": "sha256-p1ska6aoeHyBLfhCjNMQKR6Jm+Is1DOrHR1eLsY/1LI=",
    "./_framework/dotnet.runtime.fn94ls2wwa.js": "sha256-JbGaPjn+PC/jQhB3fqsJ8NF8MR3lOr+q49kJVeHNWhU=",
    "./_framework/dotnet.runtime.js": "sha256-JbGaPjn+PC/jQhB3fqsJ8NF8MR3lOr+q49kJVeHNWhU=",
    "./js/app.d2u4fo1fet.js": "sha256-NRAa6W0vebprliRFU5S+2l9FzPkacS01DifiudYGKFQ=",
    "./js/app.js": "sha256-NRAa6W0vebprliRFU5S+2l9FzPkacS01DifiudYGKFQ=",
    "./js/theme.js": "sha256-M3onquopaB/1woJqHcVA/rQNGj0qc4ZUnTJsHP7IZRk=",
    "./js/theme.tw7zf59lva.js": "sha256-M3onquopaB/1woJqHcVA/rQNGj0qc4ZUnTJsHP7IZRk=",
    "./lib/bootstrap/dist/js/bootstrap.5d0yzkekv5.js": "sha256-pxYvfpIYKWykWk7yekBNOAboswBij3inSe8amhnFWsc=",
    "./lib/bootstrap/dist/js/bootstrap.bundle.85dgjsq755.js": "sha256-dBY/6wSUpBmYIBqYBzucAkgxE4Z9db2VFPtGOIkyKfo=",
    "./lib/bootstrap/dist/js/bootstrap.bundle.js": "sha256-dBY/6wSUpBmYIBqYBzucAkgxE4Z9db2VFPtGOIkyKfo=",
    "./lib/bootstrap/dist/js/bootstrap.bundle.min.493y06b0oq.js": "sha256-CDOy6cOibCWEdsRiZuaHf8dSGGJRYuBGC+mjoJimHGw=",
    "./lib/bootstrap/dist/js/bootstrap.bundle.min.js": "sha256-CDOy6cOibCWEdsRiZuaHf8dSGGJRYuBGC+mjoJimHGw=",
    "./lib/bootstrap/dist/js/bootstrap.esm.js": "sha256-OtBaHKCppSkTX5/zt39QCHgcxIjf916OdtBLOzZ9Hbk=",
    "./lib/bootstrap/dist/js/bootstrap.esm.min.jj8uyg4cgr.js": "sha256-QZdFT1ZNdly4rmgUBtXmXFS9BU1FTa+sPe6h794sFRQ=",
    "./lib/bootstrap/dist/js/bootstrap.esm.min.js": "sha256-QZdFT1ZNdly4rmgUBtXmXFS9BU1FTa+sPe6h794sFRQ=",
    "./lib/bootstrap/dist/js/bootstrap.esm.q49sru06i7.js": "sha256-OtBaHKCppSkTX5/zt39QCHgcxIjf916OdtBLOzZ9Hbk=",
    "./lib/bootstrap/dist/js/bootstrap.js": "sha256-pxYvfpIYKWykWk7yekBNOAboswBij3inSe8amhnFWsc=",
    "./lib/bootstrap/dist/js/bootstrap.min.63fj8s7r0e.js": "sha256-3gQJhtmj7YnV1fmtbVcnAV6eI4ws0Tr48bVZCThtCGQ=",
    "./lib/bootstrap/dist/js/bootstrap.min.js": "sha256-3gQJhtmj7YnV1fmtbVcnAV6eI4ws0Tr48bVZCThtCGQ="
  }
}</script>
</head>

<body>
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
    </div>

    <!-- Start Single Page Apps for GitHub Pages -->
    <script type="text/javascript">
        // Single Page Apps for GitHub Pages
        // https://github.com/rafrex/spa-github-pages
        // Copyright (c) 2016 Rafael Pedicini, licensed under the MIT License
        // ----------------------------------------------------------------------
        // This script checks to see if a redirect is present in the query string
        // and converts it back into the correct url and adds it to the
        // browser's history using window.history.replaceState(...),
        // which won't cause the browser to attempt to load the new url.
        // When the single page app is loaded further down in this file,
        // the correct url will be waiting in the browser's history for
        // the single page app to route accordingly.
        (function (l) {
            if (l.search) {
                var q = {};
                l.search.slice(1).split('&').forEach(function (v) {
                    var a = v.split('=');
                    q[a[0]] = a.slice(1).join('=').replace(/~and~/g, '&');
                });
                if (q.p !== undefined) {
                    window.history.replaceState(null, null,
                        l.pathname.slice(0, -1) + (q.p || '') +
                        (q.q ? ('?' + q.q) : '') +
                        l.hash
                    );
                }
            }
        }(window.location))
    </script>

    <div id="blazor-error-ui">
        알 수 없는 오류가 발생했습니다.
        <a href="." class="reload">새로 고침</a>
        <span class="dismiss">&#x1F5D9;</span>
    </div>

    <!-- app.js를 먼저 로드 -->
    <script type='module' src="app.js"></script>
    <script src="_framework/blazor.webassembly.0o6sltz4v8.js"></script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HBJP4P0EBY"></script>
    <script type="text/javascript">
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-HBJP4P0EBY');
    </script>
</body>

</html>